{% doc %}
  Testimonial Card Snippet

  Renders a customer testimonial with star rating, quote, and customer information.

  @param {string} quote - Testimonial quote text (required)
  @param {string} customer_name - Customer name (required)
  @param {string} [customer_location] - Customer location (optional)
  @param {number} [rating] - Star rating 1-5 (default: 5)
  @param {string} [customer_image] - Customer image URL (optional)
  @param {string} [card_class] - Additional CSS classes (optional)

  @example
  {% render 'testimonial-card',
    quote: "Beautiful jewelry, excellent service!",
    customer_name: "Sarah Johnson",
    customer_location: "Dubai, UAE",
    rating: 5
  %}
{% enddoc %}

{% liquid
  assign quote = quote | default: ''
  assign customer_name = customer_name | default: ''
  assign customer_location = customer_location | default: ''
  assign rating = rating | default: 5
  assign customer_image = customer_image | default: ''
  assign card_class = card_class | default: ''

  unless quote != blank and customer_name != blank
    echo '<!-- Error: quote and customer_name are required for testimonial-card snippet -->'
    break
  endunless
%}

<div class="testimonial-card {{ card_class }}">
  <div class="testimonial-card__inner">
    <!-- Star Rating -->
    <div class="testimonial-card__rating">
      {% for i in (1..5) %}
        {% if i <= rating %}
          <svg class="testimonial-card__star testimonial-card__star--filled" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 1L12.9389 7.0206L19.5106 7.90983L14.755 12.4794L15.8779 19L10 15.7L4.12215 19L5.24497 12.4794L0.489435 7.90983L7.06107 7.0206L10 1Z" fill="currentColor"/>
          </svg>
        {% else %}
          <svg class="testimonial-card__star" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 1L12.9389 7.0206L19.5106 7.90983L14.755 12.4794L15.8779 19L10 15.7L4.12215 19L5.24497 12.4794L0.489435 7.90983L7.06107 7.0206L10 1Z" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        {% endif %}
      {% endfor %}
    </div>
    
    <!-- Quote -->
    <blockquote class="testimonial-card__quote">
      <svg class="testimonial-card__quote-icon" width="40" height="32" viewBox="0 0 40 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 32V14.4C0 6.4 4.8 0 17.6 0V6.4C12.8 6.4 8.8 8 6.4 12.8H17.6V32H0ZM22.4 32V14.4C22.4 6.4 27.2 0 40 0V6.4C35.2 6.4 31.2 8 28.8 12.8H40V32H22.4Z" fill="currentColor" opacity="0.1"/>
      </svg>
      <p class="testimonial-card__text">{{ quote | escape }}</p>
    </blockquote>
    
    <!-- Customer Info -->
    <div class="testimonial-card__customer">
      {% if customer_image != blank %}
        <div class="testimonial-card__avatar">
          {{- customer_image | image_url: width: 96 | image_tag: alt: customer_name, loading: 'lazy', width: 48, height: 48 -}}
        </div>
      {% else %}
        <div class="testimonial-card__avatar testimonial-card__avatar--placeholder">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      {% endif %}
      
      <div class="testimonial-card__info">
        <p class="testimonial-card__name">{{ customer_name | escape }}</p>
        {% if customer_location != blank %}
          <p class="testimonial-card__location">{{ customer_location | escape }}</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% stylesheet %}
  .testimonial-card {
    width: 100%;
    height: 100%;
  }
  
  .testimonial-card__inner {
    background: #FFFFFF;
    border-radius: var(--border-radius, 8px);
    padding: var(--spacing-xl);
    box-shadow: var(--shadow-md);
    height: 100%;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    transition: var(--transition-normal);
  }
  
  .testimonial-card__inner:hover {
    box-shadow: var(--shadow-xl);
    transform: translateY(-4px);
  }
  
  .testimonial-card__rating {
    display: flex;
    gap: 0.25rem;
    color: #D4AF37;
  }
  
  .testimonial-card__star {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
  }
  
  .testimonial-card__star--filled {
    color: #D4AF37;
  }
  
  .testimonial-card__quote {
    position: relative;
    margin: 0;
    flex: 1;
  }
  
  .testimonial-card__quote-icon {
    position: absolute;
    top: -10px;
    left: -10px;
    width: 40px;
    height: 32px;
    color: var(--color-primary, #D4AF37);
    opacity: 0.15;
  }
  
  .testimonial-card__text {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--color-foreground, #1F2937);
    margin: 0;
    font-style: italic;
  }
  
  .testimonial-card__customer {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .testimonial-card__avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
    background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .testimonial-card__avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .testimonial-card__avatar--placeholder {
    color: var(--color-primary, #D4AF37);
  }
  
  .testimonial-card__info {
    flex: 1;
  }
  
  .testimonial-card__name {
    font-weight: 600;
    font-size: 0.9375rem;
    color: var(--color-foreground, #1F2937);
    margin: 0 0 0.25rem 0;
  }
  
  .testimonial-card__location {
    font-size: 0.875rem;
    color: var(--color-foreground, #1F2937);
    opacity: 0.6;
    margin: 0;
  }
  
  /* Mobile styles */
  @media (max-width: 767px) {
    .testimonial-card__inner {
      padding: var(--spacing-lg);
    }
    
    .testimonial-card__text {
      font-size: 0.9375rem;
    }
  }
{% endstylesheet %}

