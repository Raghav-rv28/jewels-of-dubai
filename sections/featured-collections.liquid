{% comment %}
  Featured Collections Section for Jewelry Store
  
  Displays a grid of collection cards showcasing different jewelry categories.
  Perfect for highlighting main product categories on the homepage.
{% endcomment %}

{% liquid
  assign section_id = section.settings.custom_id | default: section.id
  assign heading = section.settings.heading | default: 'sections.featured_collections.title' | t
  assign subheading = section.settings.subheading | default: 'sections.featured_collections.subtitle' | t
  assign collections_to_show = section.settings.collections_to_show | default: 8
  assign columns_desktop = section.settings.columns_desktop | default: 4
  assign columns_mobile = section.settings.columns_mobile | default: 2
%}

<section id="{{ section_id }}" class="featured-collections section" style="--columns-desktop: {{ columns_desktop }}; --columns-mobile: {{ columns_mobile }};">
  <div class="page-width">
    {% if heading != blank or subheading != blank %}
      <div class="featured-collections__header scroll-reveal">
        {% if heading != blank %}
          <h2 class="section-heading">{{ heading }}</h2>
        {% endif %}
        
        {% if subheading != blank %}
          <p class="section-subheading">{{ subheading }}</p>
        {% endif %}
      </div>
    {% endif %}
    
    <div class="featured-collections__grid scroll-reveal">
      {% for collection in collections limit: collections_to_show %}
        <div class="featured-collections__item scroll-reveal" style="--animation-delay: {{ forloop.index0 | times: 0.1 }}s;">
          {% render 'collection-card',
            collection: collection,
            show_product_count: section.settings.show_product_count
          %}
        </div>
      {% else %}
        <!-- Fallback content when no collections are available -->
        {% for i in (1..collections_to_show) %}
          <div class="featured-collections__item">
            <div class="collection-card">
              <div class="collection-card__image">
                <div class="collection-card__placeholder">
                  {{ 'collection-1' | placeholder_svg_tag: 'collection-card__placeholder-svg' }}
                </div>
                <div class="collection-card__overlay">
                  <div class="collection-card__content">
                    <h3 class="collection-card__title">
                      Collection {{ i }}
                    </h3>
                    <p class="collection-card__count">
                      {{ i | times: 12 }} products
                    </p>
                    <span class="collection-card__cta">
                      View collection
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      {% endfor %}
    </div>
    
    {% if section.settings.show_view_all and collections.size > collections_to_show %}
      <div class="featured-collections__footer">
        <a href="{{ routes.all_products_collection_url }}" class="btn btn--outline">
          {{ 'collections.view_all' | t }}
        </a>
      </div>
    {% endif %}
  </div>
</section>

{% stylesheet %}
  .featured-collections__header {
    margin-bottom: var(--spacing-3xl);
  }
  
  .featured-collections__grid {
    display: grid;
    grid-template-columns: repeat(var(--columns-desktop, 4), 1fr);
    gap: var(--spacing-xl);
    margin-bottom: var(--spacing-2xl);
  }
  
  .featured-collections__item {
    width: 100%;
    transition-delay: var(--animation-delay, 0s);
  }
  
  .featured-collections__footer {
    text-align: center;
    margin-top: var(--spacing-2xl);
  }
  
  /* Mobile styles */
  @media (max-width: 767px) {
    .featured-collections__grid {
      grid-template-columns: repeat(var(--columns-mobile, 2), 1fr);
      gap: var(--spacing-lg);
    }
  }
  
  /* Tablet styles */
  @media (min-width: 768px) and (max-width: 1023px) {
    .featured-collections__grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }
{% endstylesheet %}

{% render 'scroll-animations' %}

{% schema %}
{
  "name": "Featured collections",
  "tag": "section",
  "class": "featured-collections-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured collections"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Explore our curated selection of premium jewelry"
    },
    {
      "type": "range",
      "id": "collections_to_show",
      "label": "Number of collections to show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 8
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Columns on desktop",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 4
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "Columns on mobile",
      "options": [
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        }
      ],
      "default": "2"
    },
    {
      "type": "checkbox",
      "id": "show_product_count",
      "label": "Show product count",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View all' button",
      "default": true
    },
    {
      "type": "text",
      "id": "custom_id",
      "label": "Custom section ID"
    }
  ],
  "presets": [
    {
      "name": "Featured collections"
    }
  ]
}
{% endschema %}
