{% comment %}
  Brand Story Section with Parallax Effect
  
  A cinematic section featuring split-screen layout with parallax images or video backgrounds.
  Perfect for telling your brand story with elegant visuals and typography.
{% endcomment %}

{% liquid
  assign section_id = section.settings.custom_id | default: section.id
  assign heading = section.settings.heading
  assign subheading = section.settings.subheading
  assign content = section.settings.content
  assign layout = section.settings.layout
  assign image_position = section.settings.image_position
  assign enable_parallax = section.settings.enable_parallax
  assign parallax_speed = section.settings.parallax_speed
%}

<section 
  id="{{ section_id }}" 
  class="brand-story section brand-story--{{ layout }}"
  style="
    --section-padding-top: {{ section.settings.padding_top }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom }}px;
  "
>
  <div class="brand-story__container page-width">
    <div class="brand-story__layout brand-story__layout--{{ image_position }}">
      <!-- Media Side -->
      <div class="brand-story__media scroll-reveal scroll-reveal--fade-{{ image_position }}">
        {% if enable_parallax %}
          {% if section.settings.video_url != blank %}
            {% render 'parallax-container',
              image: '',
              video: section.settings.video_url,
              speed: parallax_speed,
              height: '600px',
              overlay_opacity: section.settings.overlay_opacity,
              overlay_color: '#000000',
              container_class: 'brand-story__parallax'
            %}
          {% elsif section.settings.image != blank %}
            {% render 'parallax-container',
              image: section.settings.image,
              video: '',
              speed: parallax_speed,
              height: '600px',
              overlay_opacity: section.settings.overlay_opacity,
              overlay_color: '#000000',
              container_class: 'brand-story__parallax'
            %}
          {% else %}
            <div class="brand-story__placeholder">
              {{ 'lifestyle-1' | placeholder_svg_tag: 'brand-story__placeholder-svg' }}
            </div>
          {% endif %}
        {% else %}
          {% if section.settings.video_url != blank %}
            <div class="brand-story__video-wrapper">
              <video 
                class="brand-story__video"
                autoplay 
                muted 
                loop 
                playsinline
                preload="metadata"
              >
                {%- comment -%}theme-check-disable RemoteAsset{%- endcomment -%}
                <source src="{{ section.settings.video_url }}" type="video/mp4">
                {%- comment -%}theme-check-enable RemoteAsset{%- endcomment -%}
              </video>
              <div class="brand-story__overlay" style="opacity: {{ section.settings.overlay_opacity }};"></div>
            </div>
          {% elsif section.settings.image != blank %}
            <div class="brand-story__image-wrapper">
              {% render 'image',
                image: section.settings.image,
                width: 800,
                height: 600,
                class: 'brand-story__image'
              %}
              <div class="brand-story__overlay" style="opacity: {{ section.settings.overlay_opacity }};"></div>
            </div>
          {% else %}
            <div class="brand-story__placeholder">
              {{ 'lifestyle-1' | placeholder_svg_tag: 'brand-story__placeholder-svg' }}
            </div>
          {% endif %}
        {% endif %}
      </div>
      
      <!-- Content Side -->
      <div class="brand-story__content scroll-reveal">
        <div class="brand-story__text">
          {% if heading != blank %}
            <h2 class="brand-story__heading">{{ heading | escape }}</h2>
          {% endif %}
          
          {% if subheading != blank %}
            <p class="brand-story__subheading">{{ subheading | escape }}</p>
          {% endif %}
          
          {% if content != blank %}
            <div class="brand-story__body">
              {{ content }}
            </div>
          {% endif %}
          
          {% if section.settings.button_text != blank and section.settings.button_url != blank %}
            <div class="brand-story__button-wrapper">
              <a href="{{ section.settings.button_url }}" class="btn btn--primary">
                {{ section.settings.button_text | escape }}
              </a>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

{% stylesheet %}
  .brand-story {
    padding-top: var(--section-padding-top, 80px);
    padding-bottom: var(--section-padding-bottom, 80px);
    background-color: var(--color-background, #FFFFFF);
  }
  
  .brand-story__container {
    max-width: var(--page-width);
  }
  
  .brand-story__layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-3xl);
    align-items: center;
  }
  
  .brand-story__layout--left {
    grid-template-columns: 1fr 1fr;
  }
  
  .brand-story__layout--right {
    grid-template-columns: 1fr 1fr;
  }
  
  .brand-story__layout--right .brand-story__media {
    order: 2;
  }
  
  .brand-story__layout--right .brand-story__content {
    order: 1;
  }
  
  .brand-story__media {
    position: relative;
    width: 100%;
    min-height: 500px;
  }
  
  .brand-story__parallax,
  .brand-story__video-wrapper,
  .brand-story__image-wrapper {
    position: relative;
    width: 100%;
    height: 600px;
    border-radius: var(--border-radius, 8px);
    overflow: hidden;
    box-shadow: var(--shadow-xl);
  }
  
  .brand-story__video,
  .brand-story__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }
  
  .brand-story__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      135deg,
      rgba(0, 0, 0, 0.4) 0%,
      rgba(0, 0, 0, 0.2) 50%,
      rgba(0, 0, 0, 0.4) 100%
    );
    z-index: 1;
  }
  
  .brand-story__placeholder {
    width: 100%;
    height: 600px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
    border-radius: var(--border-radius, 8px);
  }
  
  .brand-story__placeholder-svg {
    width: 200px;
    height: 200px;
    opacity: 0.3;
  }
  
  .brand-story__content {
    padding: var(--spacing-xl);
  }
  
  .brand-story__text {
    max-width: 600px;
  }
  
  .brand-story__layout--left .brand-story__text {
    margin-left: 0;
  }
  
  .brand-story__layout--right .brand-story__text {
    margin-right: 0;
    margin-left: auto;
  }
  
  .brand-story__heading {
    font-family: var(--font-heading);
    font-size: clamp(2rem, 4vw, 3.5rem);
    font-weight: 300;
    line-height: 1.1;
    letter-spacing: -0.02em;
    margin: 0 0 var(--spacing-lg) 0;
    color: var(--color-foreground, #1F2937);
  }
  
  .brand-story__subheading {
    font-size: clamp(1.125rem, 2vw, 1.5rem);
    line-height: 1.6;
    font-weight: 400;
    margin: 0 0 var(--spacing-xl) 0;
    color: var(--color-foreground, #1F2937);
    opacity: 0.8;
  }
  
  .brand-story__body {
    font-size: 1.0625rem;
    line-height: 1.8;
    color: var(--color-foreground, #1F2937);
    margin-bottom: var(--spacing-xl);
  }
  
  .brand-story__body p {
    margin-bottom: var(--spacing-md);
  }
  
  .brand-story__body p:last-child {
    margin-bottom: 0;
  }
  
  .brand-story__body h3 {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    font-weight: 600;
    margin: var(--spacing-xl) 0 var(--spacing-md) 0;
  }
  
  .brand-story__body ul,
  .brand-story__body ol {
    margin: var(--spacing-md) 0;
    padding-left: var(--spacing-xl);
  }
  
  .brand-story__body li {
    margin-bottom: var(--spacing-sm);
  }
  
  .brand-story__button-wrapper {
    margin-top: var(--spacing-xl);
  }
  
  /* Full Width Layout */
  .brand-story--full-width .brand-story__container {
    max-width: 100%;
    padding: 0;
  }
  
  .brand-story--full-width .brand-story__layout {
    gap: 0;
  }
  
  .brand-story--full-width .brand-story__media,
  .brand-story--full-width .brand-story__parallax,
  .brand-story--full-width .brand-story__video-wrapper,
  .brand-story--full-width .brand-story__image-wrapper {
    border-radius: 0;
  }
  
  .brand-story--full-width .brand-story__content {
    padding: var(--spacing-4xl);
  }
  
  /* Tablet Styles */
  @media (min-width: 768px) and (max-width: 1024px) {
    .brand-story__layout {
      gap: var(--spacing-2xl);
    }
    
    .brand-story__media {
      min-height: 400px;
    }
    
    .brand-story__parallax,
    .brand-story__video-wrapper,
    .brand-story__image-wrapper,
    .brand-story__placeholder {
      height: 500px;
    }
  }
  
  /* Mobile Styles */
  @media (max-width: 767px) {
    .brand-story {
      padding-top: var(--section-padding-mobile, 40px);
      padding-bottom: var(--section-padding-mobile, 40px);
    }
    
    .brand-story__layout {
      grid-template-columns: 1fr;
      gap: var(--spacing-xl);
    }
    
    .brand-story__layout--right .brand-story__media {
      order: 1;
    }
    
    .brand-story__layout--right .brand-story__content {
      order: 2;
    }
    
    .brand-story__media {
      min-height: 350px;
    }
    
    .brand-story__parallax,
    .brand-story__video-wrapper,
    .brand-story__image-wrapper,
    .brand-story__placeholder {
      height: 400px;
    }
    
    .brand-story__content {
      padding: 0;
    }
    
    .brand-story__text {
      max-width: 100%;
    }
    
    .brand-story--full-width .brand-story__content {
      padding: var(--spacing-xl);
    }
  }
{% endstylesheet %}

{% render 'scroll-animations' %}

{% schema %}
{
  "name": "Brand story",
  "tag": "section",
  "class": "brand-story-section",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Section width",
      "options": [
        {
          "value": "standard",
          "label": "Standard"
        },
        {
          "value": "full-width",
          "label": "Full width"
        }
      ],
      "default": "standard"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Media position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "url",
      "id": "video_url",
      "label": "Video URL",
      "info": "External video URL (e.g., http://example.com/video.mp4). Overrides image if provided."
    },
    {
      "type": "checkbox",
      "id": "enable_parallax",
      "label": "Enable parallax effect",
      "default": true,
      "info": "Creates a cinematic scrolling effect. Disabled on mobile for performance."
    },
    {
      "type": "range",
      "id": "parallax_speed",
      "label": "Parallax speed",
      "min": 0.1,
      "max": 1,
      "step": 0.1,
      "default": 0.5,
      "info": "Higher values create more dramatic parallax effect"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Media overlay opacity",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "default": 0.3,
      "info": "Dark overlay on image/video for better text readability"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our story"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Crafting timeless elegance since 1985"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content",
      "default": "<p>Every piece in our collection tells a story of craftsmanship, tradition, and timeless beauty. From the heart of Dubai, we bring you jewelry that captures the essence of luxury and elegance.</p><p>Our master artisans combine centuries-old techniques with modern design to create pieces that are as unique as the people who wear them.</p>"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Learn more"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 80
    },
    {
      "type": "text",
      "id": "custom_id",
      "label": "Custom section ID"
    }
  ],
  "presets": [
    {
      "name": "Brand story",
      "settings": {
        "heading": "Our story",
        "subheading": "Crafting timeless elegance since 1985",
        "content": "<p>Every piece in our collection tells a story of craftsmanship, tradition, and timeless beauty. From the heart of Dubai, we bring you jewelry that captures the essence of luxury and elegance.</p>",
        "button_text": "Learn more",
        "enable_parallax": true,
        "image_position": "left"
      }
    }
  ]
}
{% endschema %}

